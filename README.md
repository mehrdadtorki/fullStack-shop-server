برای توضیح کامل معماری پروژه و نحوه پوشه‌بندی، بیایید به چند بخش اصلی بپردازیم:

معماری کلی پروژه
نقش هر لایه و فایل در پروژه
نحوه پوشه‌بندی و ساختار فایل‌ها
1. معماری کلی پروژه
پروژه شما بر اساس معماری لایه‌ای (Layered Architecture) و طراحی مبتنی بر دامنه (Domain-Driven Design یا DDD) پیاده‌سازی شده است. این معماری به شما کمک می‌کند تا کد خود را به صورت منظم و مقیاس‌پذیر نگهداری کنید.

لایه‌ها:
لایه ارائه (Presentation Layer): این لایه با درخواست‌های ورودی (مثلاً APIهای GraphQL) و پاسخ‌ها سر و کار دارد.
لایه برنامه (Application Layer): این لایه عملیات برنامه را هماهنگ می‌کند و درخواست‌ها را به لایه دامنه و زیرساخت می‌فرستد.
لایه دامنه (Domain Layer): شامل منطق کسب‌وکار اصلی و مدل‌های دامنه است.
لایه زیرساخت (Infrastructure Layer): با سیستم‌های خارجی مثل پایگاه داده و سرویس‌های شخص ثالث تعامل دارد.
2. نقش هر لایه و فایل در پروژه
لایه ارائه (Presentation Layer)
/api/graphql/typeDefs: این پوشه حاوی تعریف‌های اسکیمای GraphQL است که نوع‌ها و عملیات‌های مختلف (Query و Mutation) را مشخص می‌کند.

ProductTypeDef.js: تعریف نوع‌های مربوط به محصول.
QueryTypeDef.js: تعریف نوع‌های مربوط به Query (مانند getAllProducts).
MutationTypeDef.js: تعریف نوع‌های مربوط به Mutation (مانند addProduct).
/api/graphql/resolvers: این پوشه شامل کدهای مربوط به حل‌کننده‌ها (Resolvers) است که درخواست‌های GraphQL را پردازش و به لایه برنامه ارجاع می‌دهند.

ProductResolver.js: کدی که منطق پردازش Query و Mutation مرتبط با محصولات را مدیریت می‌کند.
/api/controllers: اگر APIهای REST هم دارید، اینجا کنترلرهای HTTP قرار می‌گیرند که درخواست‌ها را پردازش و به لایه برنامه ارسال می‌کنند.

server.js: این فایل سرور Express و Apollo Server (GraphQL) را راه‌اندازی می‌کند و واسط بین درخواست‌ها و پاسخ‌ها است.

لایه برنامه (Application Layer)
/application/services: سرویس‌های برنامه که منطق کسب‌وکار را هماهنگ و اجرا می‌کنند.

ProductService.js: سرویسی که عملیات‌های مرتبط با محصولات مانند دریافت همه محصولات یا افزودن یک محصول جدید را مدیریت می‌کند.
/application/dto: اشیای انتقال داده (DTO) که برای انتقال داده‌ها بین لایه‌ها استفاده می‌شوند.

ProductDTO.js: اشیای مربوط به داده‌های محصول که بین لایه‌ها جابجا می‌شود.
/application/use-cases: اینجا موارد استفاده (Use Cases) خاص برنامه که هر کدام نماینده یک عملیات خاص هستند، قرار می‌گیرند.

GetProductUseCase.js: مثالی از یک Use Case برای دریافت یک محصول با شناسه خاص.
لایه دامنه (Domain Layer)
/domain/entities: موجودیت‌های دامنه که نمایانگر مفاهیم اصلی کسب‌وکار هستند.

Product.js: کلاسی که نمایانگر محصول است و شامل منطق محاسبه تخفیف و دیگر عملیات‌های مرتبط با محصول می‌شود.
/domain/repositories: اینجا اینترفیس‌های مخازن قرار می‌گیرند که لایه زیرساخت آن‌ها را پیاده‌سازی می‌کند.

IProductRepository.js: اینترفیس مربوط به مخزن محصولات که لایه زیرساخت آن را پیاده‌سازی می‌کند.
/domain/value-objects: اشیای ارزش (Value Objects) که نمایانگر ویژگی‌های خاص و غیرقابل تغییر هستند.

Price.js: نمایانگر یک شیء قیمت که عملیات‌های مرتبط با آن را مدیریت می‌کند.
لایه زیرساخت (Infrastructure Layer)
/infrastructure/persistence/repositories: پیاده‌سازی مخازن که به پایگاه داده یا سیستم‌های خارجی متصل می‌شوند.

ProductRepository.js: پیاده‌سازی مخزن محصولات که عملیات‌های مربوط به ذخیره و بازیابی محصولات از پایگاه داده را انجام می‌دهد.
/infrastructure/persistence/orm: مدیریت اتصال به پایگاه داده و تنظیمات ORM (مثلاً با استفاده از Sequelize یا Mongoose).

db.js: فایل مربوط به تنظیمات پایگاه داده.
/infrastructure/external-services: سرویس‌های خارجی که با سرویس‌های شخص ثالث تعامل دارند.

ThirdPartyService.js: مثالی از یک سرویس خارجی که با APIهای شخص ثالث کار می‌کند.